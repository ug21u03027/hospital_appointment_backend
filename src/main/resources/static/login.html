<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Login</title></head><body>
<h1>Login</h1>
<div>
  <label>Username:</label><input id="username"><br>
  <label>Password:</label><input id="password" type="password"><br>
  <label>Role:</label>
  <select id="role"><option value="USER">User</option><option value="DOCTOR">Doctor</option></select><br>
  <button id="login">Login</button>
  <p id="msg"></p>
</div>
<script>
document.getElementById('login').onclick = async () => {
  const u = document.getElementById('username').value.trim();
  const p = document.getElementById('password').value.trim();
  const r = document.getElementById('role').value;
  const res = await fetch('/api/auth/login', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({username:u,password:p,role:r}) });
  if (res.ok) {
    const data = await res.json();
    localStorage.setItem('token', data.token);
    localStorage.setItem('role', data.role);
    localStorage.setItem('username', data.username);
    if (data.role === 'DOCTOR') location.href = '/doctor-dashboard.html'; else location.href = '/user-dashboard.html';
  } else {
    const t = await res.text();
    document.getElementById('msg').textContent = 'Login failed: ' + t;
  }
};
</script>
</body></html>
